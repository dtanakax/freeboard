{"version":1,"allow_edit":true,"plugins":[],"panes":[{"title":"Google Map","width":1,"row":{"3":1},"col":{"3":1},"col_width":2,"widgets":[{"type":"google_map","settings":{"lat":"datasources[\"weather\"][\"latitude\"]","lon":"datasources[\"weather\"][\"longitude\"]","blocks":6}}]},{"title":"Pointer","width":1,"row":{"3":1,"4":21,"5":21,"6":21},"col":{"3":3,"4":2,"5":3,"6":3},"col_width":1,"widgets":[{"type":"pointer","settings":{"title":"風向き","direction":"datasources[\"weather\"][\"wind_direction\"]","value_text":"datasources[\"weather\"][\"wind_speed\"]","units":"m","circle_color":"#ff9900","pointer_color":"#fff"}}]},{"title":"Gauge","width":1,"row":{"3":11,"4":21,"5":13,"6":13},"col":{"3":3,"4":1,"5":2,"6":2},"col_width":1,"widgets":[{"type":"gauge","settings":{"title":"湿度","value":"datasources[\"weather\"][\"humidity\"]","shape":0,"units":"%","value_fontcolor":"#d3d4d4","gauge_upper_color":"#ff0000","gauge_mid_color":"#f9c802","gauge_lower_color":"#a9d70b","gauge_color":"#edebeb","gauge_widthscale":"50","min_value":0,"max_value":100}},{"type":"gauge","settings":{"title":"気圧","value":"datasources[\"weather\"][\"pressure\"]","shape":1,"units":"hPA","value_fontcolor":"#d3d4d4","gauge_upper_color":"#ff0000","gauge_mid_color":"#f9c802","gauge_lower_color":"#a9d70b","gauge_color":"#edebeb","gauge_widthscale":"25","min_value":0,"max_value":2000}}]},{"title":"Text","width":1,"row":{"3":15,"4":1,"5":13},"col":{"3":1,"4":1,"5":1},"col_width":1,"widgets":[{"type":"text_widget","settings":{"title":"","size":"regular","value":"datasources[\"time\"][\"full_string_value\"]","animate":true}},{"type":"text_widget","settings":{"title":"気温","size":"regular","value":"return datasources[\"weather\"][\"current_temp\"].toFixed(2);","sparkline":true,"animate":true,"units":"℃"}}]},{"title":"Indicator Light","width":1,"row":{"3":15,"4":1,"5":13},"col":{"3":2,"4":2,"5":3},"col_width":1,"widgets":[{"type":"indicator","settings":{"title":"気温","value":"return (datasources[\"weather\"][\"current_temp\"] >= 5) ? 1 : 0;","on_text":"5度以上","off_text":"5度以上"}},{"type":"indicator","settings":{"title":"湿度","value":"return (datasources[\"weather\"][\"humidity\"] == 100) ? 1 : 0;","on_text":"100%","off_text":"100%"}},{"type":"indicator","settings":{"title":"風速","value":"return (datasources[\"weather\"][\"wind_speed\"] == 10) ? 1 : 0;","on_text":"10m以上","off_text":"10m以上"}}]},{"title":"C3 Chart","width":1,"row":{"3":23,"4":9,"5":9},"col":{"3":1,"4":1,"5":1},"col_width":2,"widgets":[{"type":"c3js","settings":{"title":"timeseriese","blocks":"5","value":"var xaxis = ['x'];\nvar temp_max = ['MaxTemp'];\nvar temp_min = ['MinTemp'];\nvar temp = ['Temp'];\nvar humidity = ['Humidity'];\n\nfunction _formattemp(v) {\n    var t = 0.55*(v - 32);\n    return parseFloat(t.toFixed(2));\n}\n\n_.each(datasources[\"history2\"][\"list\"], function(v) {\n    xaxis.push(moment.unix(v.dt).format(\"YYYY/MM/DD hh\"));\n    temp_max.push(_formattemp(v.main.temp_max));\n    temp_min.push(_formattemp(v.main.temp_min));\n    temp.push(_formattemp(v.main.temp));\n    humidity.push(_formattemp(v.main.humidity));\n});\n\nvar datasets = {\n    data: {\n        columns: [\n                xaxis,\n                temp,\n                temp_max,\n                temp_min,\n                humidity\n        ]\n    }\n};\nreturn datasets;","options":"{\n    \"data\": {\n        \"x\": \"x\",\n        \"xFormat\": \"%Y/%m/%d %H\",\n        \"axes\": {\n            \"MaxTemp\": \"y\",\n            \"MinTemp\": \"y\",\n            \"Temp\": \"y\",\n            \"Humidity\": \"y2\"\n        }\n    },\n    \"axis\": {\n        \"y\": {\n            \"label\": \"Temparature\"\n        },\n\t\t\"y2\": {\n            \"label\": \"Humidity\",\n            \"show\": true\n        },\n\t\t\"x\": {\n            \"type\": \"timeseries\",\n            \"tick\": {\n                \"format\": \"%m/%d %H\"\n            }\n        }\n    }\n}"}}]}],"datasources":[{"name":"weather","type":"openweathermap","settings":{"location":"Tokyo, JP","units":"metric","refresh":5}},{"name":"time","type":"clock","settings":{"refresh":1}},{"name":"history2","type":"JSON","settings":{"url":"http://api.openweathermap.org/data/2.5/history/city","use_thingproxy":false,"refresh":"20","method":"GET","body":"{ \"id\":2885679, \"type\":\"hour\", \"start\":1369728000 }"}}],"columns":3}