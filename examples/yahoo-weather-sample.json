{"version":1,"allow_edit":true,"plugins":[],"panes":[{"title":"Place","width":1,"row":{"2":1,"3":1},"col":{"2":1,"3":1},"col_width":3,"widgets":[{"type":"text_widget","settings":{"title":"","size":"regular","value":"datasources[\"yahooweather\"][\"item\"][\"title\"]","animate":true,"units":""}}]},{"title":"Google Map","width":1,"row":{"2":5,"3":5,"4":5,"5":5},"col":{"2":1,"3":2,"4":2,"5":2},"col_width":2,"widgets":[{"type":"google_map","settings":{"blocks":4,"lat":"datasources[\"yahooweather\"][\"latitude\"]","lon":"datasources[\"yahooweather\"][\"longitude\"]","drawpath":false}}]},{"title":"Text","width":1,"row":{"2":15,"3":5,"4":5,"5":5,"6":5,"7":5},"col":{"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"col_width":1,"widgets":[{"type":"text_widget","settings":{"title":"","size":"regular","value":"datasources[\"yahooweather\"][\"conditions\"]","animate":false,"units":""}},{"type":"text_widget","settings":{"title":"現在温度","size":"big","value":"datasources[\"yahooweather\"][\"current_temp\"]","sparkline":true,"animate":true,"units":"°C"}},{"type":"text_widget","settings":{"title":"最高気温","size":"regular","value":"datasources[\"yahooweather\"][\"high_temp\"]","sparkline":false,"animate":true,"units":"°C"}},{"type":"text_widget","settings":{"title":"最低気温","size":"regular","value":"datasources[\"yahooweather\"][\"low_temp\"]","sparkline":false,"animate":true,"units":"°C"}},{"type":"text_widget","settings":{"title":"日の出時刻","size":"regular","value":"datasources[\"yahooweather\"][\"sunrise\"]","animate":true,"units":""}},{"type":"text_widget","settings":{"title":"日の入り時刻","size":"regular","value":"datasources[\"yahooweather\"][\"sunset\"]","animate":true,"units":""}}]},{"title":"Gauge","width":1,"row":{"2":15,"3":15,"4":15,"5":15,"6":15,"7":15},"col":{"2":2,"3":2,"4":2,"5":2,"6":2,"7":2},"col_width":1,"widgets":[{"type":"gauge","settings":{"title":"湿度","value":"datasources[\"yahooweather\"][\"humidity\"]","shape":0,"units":"%","value_fontcolor":"#d3d4d4","gauge_upper_color":"#4505f5","gauge_mid_color":"#7354ff","gauge_lower_color":"#b984fa","gauge_color":"#edebeb","gauge_widthscale":20,"min_value":0,"max_value":100}}]},{"title":"Pointer","width":1,"row":{"2":29,"3":15,"4":19,"5":19,"6":19,"7":19},"col":{"2":2,"3":3,"4":1,"5":1,"6":1,"7":1},"col_width":1,"widgets":[{"type":"pointer","settings":{"title":"風速 風向き","blocks":4,"direction":"datasources[\"yahooweather\"][\"wind_direction\"]","value_text":"datasources[\"yahooweather\"][\"wind_speed\"]","units":"m","circle_color":"#ff9900","pointer_color":"#fff"}}]},{"title":"INDICATOR LIGHT","width":1,"row":{"2":25,"3":21,"4":17,"5":17,"6":17,"7":17},"col":{"2":2,"3":1,"4":1,"5":1,"6":1,"7":1},"col_width":1,"widgets":[{"type":"indicator","settings":{"title":"雪降ってる？","value":"var snowcode = [\n    7, 14, 15, 16, 41, 42, 43, 46\n];\nreturn (_.indexOf(snowcode, Number(datasources[\"yahooweather\"][\"item\"][\"condition\"][\"code\"])) == -1) ? 0 : 1;\n","on_text":"降ってます","off_text":"降っていません"}}]},{"title":"C3 Sub Chart","width":1,"row":{"2":39,"3":25,"4":21,"5":21,"6":21,"7":21},"col":{"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"col_width":3,"widgets":[{"type":"c3js","settings":{"title":"Temperature / Humidity","blocks":6,"value":"// Initial data setup\nfunction initialize() {\n    _global.duration = 1*60*60;\t\t\t\t// display duration form start timestamp (second)\n    _global.columns = [\n        ['x'],\n        ['Temperature'],\n        ['TempHi'],\n        ['TempLo'],\n        ['Humidity']\n    ];\n  \n    _global.datasets = {\n         _op: 'load',\n        data: {\n            columns: _global.columns\n        }\n    };\n\n    pushData(_global.datasets.data.columns);\n   \n    _global.init = true;\n    return _global.datasets;\n}\n\nfunction pushData(col) {\n    col[0].push(moment().toDate());\n    col[1].push(datasources[\"yahooweather\"][\"current_temp\"]);\n    col[2].push(datasources[\"yahooweather\"][\"high_temp\"]);\n    col[3].push(datasources[\"yahooweather\"][\"low_temp\"]);\n    col[4].push(datasources[\"yahooweather\"][\"humidity\"]);\n}\n\nfunction durationFiltering(col, duration) {\n    var threshhold = moment().unix() - duration;\n\tvar first = moment(col[0][1]).unix();\t\t// first timestamp data\n    if (first < threshhold) {\n        col[0].splice(1, 1);\n        col[1].splice(1, 1);\n        col[2].splice(1, 1);\n        col[3].splice(1, 1);\n        col[4].splice(1, 1);\n    }\n    pushData(col);\n}\n\nif (_.isUndefined(_global.init) || _global.init === false)\n    return initialize();\n\ndurationFiltering(_global.columns, _global.duration);\n\nreturn { columns: _global.columns };\n","options":"{\n    \"data\": {\n        \"x\": \"x\",\n        \"axes\": {\n            \"Temperature\": \"y\",\n            \"TempHi\": \"y\",\n            \"TempLo\": \"y\",\n            \"Humidity\": \"y2\"\n        }\n    },\n    \"point\": {\n        \"show\": false\n    },\n    \"axis\": {\n        \"y\": {\n            \"label\": \"Temperature\",\n            \"tick\": {\n                \"format\": \"function (v, id, i, j) { return v+'°C'; }\"\n            }\n        },\n        \"y2\": {\n            \"show\": true,\n            \"label\": \"Humidity\",\n            \"tick\": {\n                \"format\": \"function (v, id, i, j) { return v+'%'; }\"\n            }\n        },\n        \"x\": {\n            \"type\": \"timeseries\",\n            \"tick\": {\n                \"format\": \"%H:%M:%S\"\n            }\n        }\n    },\n    \"subchart\": {\n        \"show\": true\n    }\n}"}}]}],"datasources":[{"name":"yahooweather","type":"yahooweather","settings":{"location":"150-0045","units":"metric","refresh":5}}],"columns":3}